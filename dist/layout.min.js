var layout=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),r(n(2)),r(n(7)),r(n(15)),r(n(23)),r(n(32))},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=r(n(33));function s(e,t,n){const r=i.toArray(i.where(e,e=>e.uses.length>1));let o=[],s=0;for(const e of i.permutations(t.values))for(const u of i.permutations(n.values)){let a=0;s++;for(const o of r)for(const r of i.distinct(i.select(o.uses,e=>e.status))){const s=i.toArray(i.select(e,e=>i.toArray(i.select(u,s=>i.exists(i.where(o.uses,i=>i.status===r&&i[t.dimension]===e&&i[n.dimension]===s))))));for(let t=e.length;t--;)for(let e=u.length;e--;)t&&s[t][e]&&s[t-1][e]&&a++,e&&s[t][e]&&s[t][e-1]&&a++}if(0===o.length||a>=o[0].affinity){const r={xAxis:{dimension:t.dimension,values:e},yAxis:{dimension:n.dimension,values:u},affinity:a};(0===o.length||a>o[0].affinity)&&(o=[]),o.push(r)}}return console.log(`Tested ${r.length} applications in ${s} scenarios`),console.log(`Returning ${o.length} scenarios with affinity score of ${0===o.length?0:o[0].affinity}`),o}t.getDemoData=function(){return o.default},t.optimise=function(e,t,n,r=s){const o=i.toArray(i.distinct(i.selectMany(e,e=>e.uses,(e,n)=>n[t]))),u=i.toArray(i.distinct(i.selectMany(e,e=>e.uses,(e,t)=>t[n]))),a=(new Date).getTime(),c=r(e,{dimension:t,values:o},{dimension:n,values:u}),l=(new Date).getTime();return console.log(`bruteForce optimisation took ${l-a}ms`),c},t.bruteForce=s,t.prepare=function(e,t){const n=i.toArray(i.selectMany(e,e=>e.uses,(e,t)=>({name:e.name,capability:t.capability,product:t.product,location:t.location,status:t.status}))),r=i.toArray(i.select(t.yAxis.values,e=>i.toArray(i.select(t.xAxis.values,r=>i.toArray(i.select(i.where(n,n=>n[t.xAxis.dimension]===r&&n[t.yAxis.dimension]===e),e=>({name:e.name,status:e.status,colspan:1,rowspan:1})))))));for(let e=t.xAxis.values.length;e--;)for(let n=t.yAxis.values.length;n--;){let t=!1;if(1===r[n][e].length){const i=r[n][e][0];if(e>0){const o=r[n][e-1];1===o.length&&i.name===o[0].name&&i.status===o[0].status&&(o[0].colspan+=i.colspan,r[n].splice(e,1),t=!0)}if(!1===t&&n>0){const t=r[n-1][e];1===t.length&&i.name===t[0].name&&i.status===t[0].status&&i.colspan===t[0].colspan&&(t[0].rowspan+=i.rowspan,r[n].splice(e,1))}}}return r}},function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),r(n(3)),r(n(4)),r(n(5)),r(n(6))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BetweenComparer=function(e,t){return(!t.from||e>=t.from)&&(!t.to||e<=t.to)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EquallityComparer=function(e,t){return e instanceof Date&&t instanceof Date?e.toUTCString()===t.toUTCString():Object.is(e,t)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GreaterComparer=function(e,t){return e>t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.True=function(){return!0}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(8);t.aggregate=r.aggregate;var i=n(9);t.all=i.all;var o=n(10);t.exists=o.exists;var s=n(11);t.first=s.first;var u=n(12);t.last=u.last;var a=n(13);t.sum=a.sum;var c=n(14);t.toArray=c.toArray},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.aggregate=function(e,t,n){let r=t;for(const t of e)r=n(r,t);return r}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.all=function(e,t){for(const n of e)if(!t(n))return!1;return!0}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.exists=function(e){return!e[Symbol.iterator]().next().done}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(0);t.first=function(e,t=r.True){for(const n of e)if(t(n))return n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(0);t.last=function(e,t=r.True){let n;for(const r of e)t(r)&&(n=r);return n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sum=function(e){let t=0;for(const n of e)t+=n;return t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.toArray=function(e){return[...e]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(16);t.append=r.append;var i=n(17);t.join=i.join;var o=n(19);t.permutations=o.permutations;var s=n(20);t.prepend=s.prepend;var u=n(21);t.range=u.range;var a=n(22);t.union=a.union},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.append=function*(e,t){yield*e,yield t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(0),i=n(18);t.join=function*(e,t,n,o,s,u=r.EquallityComparer,a){const c=a||new i.groupedIndex(t,o);for(const t of e)for(const e of c.select(n(t),u))yield s(t,e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(0);t.groupedIndex=class{constructor(e,t){this.groups=[];for(const n of e){const e=t(n),i=r.first(this.groups,t=>r.EquallityComparer(e,t.key));i?i.elements.push(n):this.groups.push({key:e,elements:[n]})}}*select(e,t){const n=r.where(this.groups,n=>t(e,n.key));for(const e of t===r.EquallityComparer?r.take(n,1):n)for(const t of e.elements)yield t}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(0);t.permutations=function e(t){return 1===t.length?[t]:r.selectMany(t,(n,i)=>e(r.toArray(r.where(t,(e,t)=>t!==i))),(e,t)=>[e,...t])}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.prepend=function*(e,t){yield e,yield*t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.range=function*(e,t,n=1){do{yield e,e+=n}while(--t)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.union=function*(e,t){yield*e,yield*t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(24);t.distinct=r.distinct,t.distinctA=r.distinctA;var i=n(25);t.select=i.select;var o=n(26);t.selectMany=o.selectMany;var s=n(27);t.skip=s.skip;var u=n(28);t.skipWhile=u.skipWhile;var a=n(29);t.take=a.take;var c=n(30);t.takeWhile=c.takeWhile;var l=n(31);t.where=l.where},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.distinct=function*(e){const t=[];for(const n of e)-1===t.indexOf(n)&&(t.push(n),yield n)},t.distinctA=function(e){const t=[];for(const n of e)-1===t.indexOf(n)&&t.push(n);return t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.select=function*(e,t){let n=0;for(const r of e)yield t(r,n++)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.selectMany=function*(e,t,n){let r=0;for(const i of e)for(const e of t(i,r++))yield n(i,e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.skip=function*(e,t){for(const n of e)0===t?yield n:--t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.skipWhile=function*(e,t){let n=!1,r=0;for(const i of e)(n||(n=!t(i,r++)))&&(yield i)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.take=function*(e,t){for(const n of e){if(0==t--)break;yield n}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.takeWhile=function*(e,t){let n=0;for(const r of e){if(!t(r,n++))break;yield r}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.where=function*(e,t){let n=0;for(const r of e)t(r,n++)&&(yield r)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(0);class i{constructor(e){this.source=e}[Symbol.iterator](){return this.source[Symbol.iterator]()}aggregate(e,t){return r.aggregate(this,e,t)}all(e){return r.all(this,e)}exists(){return r.exists(this)}first(e=r.True){return r.first(this,e)}last(e=r.True){return r.last(this,e)}append(e){return new i(r.append(this,e))}distinct(){return new i(r.distinct(this))}join(e,t,n,o,s=r.EquallityComparer){return new i(r.join(this,e,t,n,o,s))}prepend(e){return new i(r.prepend(e,this))}select(e){return new i(r.select(this,e))}selectMany(e,t){return new i(r.selectMany(this,e,t))}skip(e){return new i(r.skip(this,e))}skipWhile(e){return new i(r.skipWhile(this,e))}toArray(){return r.toArray(this)}take(e){return new i(r.take(this,e))}takeWhile(e){return new i(r.takeWhile(this,e))}where(e){return new i(r.where(this,e))}union(e){return new i(r.union(this,e))}static permutations(e){return new i(r.permutations(e))}static range(e,t){return new i(r.range(e,t))}}t.Enumerable=i},function(e){e.exports=JSON.parse('[{"name":"ION","uses":[{"capability":"Market gateway","product":"MM","location":"United Kingdom","status":"green"},{"capability":"Market gateway","product":"Credit","location":"United Kingdom","status":"red"}]},{"name":"Wall St","uses":[{"capability":"Order management","product":"MM","location":"United Kingdom","status":"green"},{"capability":"Order management","product":"FX","location":"United Kingdom","status":"green"},{"capability":"Order management","product":"Rates","location":"United Kingdom","status":"green"}]},{"name":"Misys","uses":[{"capability":"Order execution","product":"Credit","location":"United Kingdom","status":"amber"},{"capability":"Order execution","product":"MM","location":"United Kingdom","status":"amber"}]},{"name":"Summit","uses":[{"capability":"Market gateway","product":"FX","location":"United Kingdom","status":"green"},{"capability":"Order execution","product":"FX","location":"United Kingdom","status":"green"},{"capability":"Market gateway","product":"Rates","location":"United Kingdom","status":"green"},{"capability":"Order execution","product":"Rates","location":"United Kingdom","status":"green"}]},{"name":"Kdb","uses":[{"capability":"Order management","product":"Equities","location":"Germany","status":"green"},{"capability":"Market gateway","product":"Equities","location":"Germany","status":"green"},{"capability":"Confirmations","product":"Equities","location":"Germany","status":"red"},{"capability":"Order execution","product":"Equities","location":"Germany","status":"amber"}]},{"name":"Thunderhead","uses":[{"capability":"Confirmations","product":"FX","location":"United Kingdom","status":"green"},{"capability":"Confirmations","product":"MM","location":"United Kingdom","status":"green"},{"capability":"Confirmations","product":"Rates","location":"United Kingdom","status":"green"},{"capability":"Confirmations","product":"Credit","location":"United Kingdom","status":"green"},{"capability":"Market gateway","product":"Credit","location":"United Kingdom","status":"red"}]}]')}]);