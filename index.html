<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
	<meta http-equiv="X-UA-Compatible" content="ie=edge">
	<meta name="description" content="Landscape map viewpoint visualisation and executable finite state machines." />
	<meta name="robots" content="index, follow" />
	<title>Landscape maps and executable state machines</title>
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
	<link rel="stylesheet" href="./style/steelbreeze.css">
	<link rel="stylesheet" href="https://steelbreeze.net/landscape/style/landscape.css">
</head>

<body>
	<header>
		<div class="fixedWidth">
			<nav>
				<a href="https://steelbreeze.net" class="selected">
					<h1>steelbreeze</h1>
				</a>
			</nav>
			<nav>
				<a href="https://steelbreeze.net/pivot">pivot</a>
				<a href="https://steelbreeze.net/landscape">landscape</a>
				<a href="https://steelbreeze.net/state">state</a>
			</nav>
		</div>
	</header>
	<main>
		<div class="mainSection">
			<div class="fixedWidth">
				<article>
					<h1>Landscape maps</h1>
					<p>For many years as an Enterprise Architect I have been drawing landscape maps in Visio to
						communicate
						the health of a domain's application portfolio. While they are a valuable communication tool,
						these
						diagrams are time-consuming, complex to draw and ever-changing. The landscape
						map visualisation tool at its simplest renders a table, splitting and joining table cells as
						needed, but also provides functionality to optimise the axes ordering for maximum joined cells.
						These diagrams conform to the Archimate landscape map viewpoint.</p>
				</article>
				<article class="widget">
					<table id="landscapeTarget"></table>
				</article>
				<article>
					<p>Landscape maps are a technique for visualizing enterprise architectures. They present
						architectural
						elements in the form of an easy to understand 2D map. A landscape map view on architectures
						provides
						non-technical stakeholders with a high-level overview, without burdening them with
						technicalities of
						architectural drawings.</p>
					<p>For a more in-depth example, including a time-dimension, see the projet page.</p>
					<p>Links: <a href="/landscape">Project</a>; <a
							href="https://github.com/steelbreeze/landscape">GitHub</a>; <a
							href="https://pubs.opengroup.org/architecture/archimate2-doc/chap08.html#_Toc371945248">Archimate</a>.
					</p>
				</article>
			</div>
		</div>
		<div class="mainSection">
			<div class="fixedWidth">
				<article>
					<h1>Pivot tables</h1>
					<p>The pivot table library is a spin-off project from the landscape library. It provides a minimalist pivot table capability, slicing data into cells defined by two dimensions. The resultant data can be aggregated with some basic numerical aggregates, or other queries applied such as those used in the landscape library to present subsets of the source data.</p>
					<p>Links: <a href="/pivot">Project</a>; <a href="https://github.com/steelbreeze/pivot">GitHub</a>.
					</p>
				</article>
				<article>
					<h1>Executable state machines</h1>
					<p>Finite state machines are a staple of computer science theory, yet this rigorous analysis
						discipline
						rarely finds its way into application code. The last project I ran used executable finite state
						machines in order to manage its business process as it had a wider variety of external event
						sources
						with non-deterministic sequencing of events.</p>
					<p>Links: <a href="/state">Project</a>; <a href="https://github.com/steelbreeze/state">GitHub</a>.
					</p>
				</article>
			</div>
		</div>
	</main>
	<footer>
		<div class="fixedWidth">
			<article>
				<a href="https://www.linkedin.com/in/mesmo/" class="fa fa-linkedin"></a>
				<a href="https://twitter.com/David13276770" class="fa fa-twitter"></a>
			</article>
			<article>
				Copyright &copy; 2020 David Mesquita-Morris.
			</article>
		</div>
	</footer>
	<script crossorigin="anonymous" src="https://polyfill.io/v3/polyfill.min.js?features=Promise%2Cfetch"></script>
	<script src="https://steelbreeze.net/landscape/dist/d3-dsv.min.js"></script>
	<script src="https://steelbreeze.net/pivot/dist/pivot.min.js"></script>
	<script src="https://steelbreeze.net/landscape/dist/landscape.min.js"></script>
	<script>
		window.fetch("./data/example.csv", { cache: "no-cache" }).then(response => response.text()).then(csv => {
			const applications = d3.csvParse(csv);

			const capability = pivot.dimension(["Market gateway", "Order execution", "Order management", "Confirmations"], "Capability");
			const product = pivot.dimension(["Rates", "FX", "MM", "Credit", "Equities"], "Product");

			const cube = pivot.cube(applications, product, capability);

			const table = landscape.split(cube, product, capability, key, true);

			landscape.merge(table);

			renderTable2(table, 'landscapeTarget');
		});

		function key(detail) {
			return { text: detail.Name, className: detail.Status };
		}

		function renderTable2(table, elementId) {
			const tableElement = document.createElement('table');
			tableElement.id = elementId;
			tableElement.classList = 'landscape';

			table.forEach((row, rowIndex) => {
				const rowElement = document.createElement('tr');

				for (const cell of row) {
					const cellElement = document.createElement(cell.className.includes('axis') ? 'th' : 'td');
					cellElement.colSpan = cell.colSpan;
					cellElement.rowSpan = cell.rowSpan;
					cellElement.className = cell.className;

					const divElement = document.createElement('div');
					divElement.appendChild(document.createTextNode(cell.text));

					cellElement.appendChild(divElement);
					rowElement.appendChild(cellElement);
				}

				tableElement.appendChild(rowElement);
			});

			document.getElementById(elementId).replaceWith(tableElement);
		}
	</script>
</body>

</html>